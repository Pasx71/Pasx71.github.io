---
layout: none # Important: Prevents Jekyll from applying HTML layout
---
[
  {% assign posts_array = site.posts | default: [] %}
  {% assign websites_array = site.collections.websites | default: [] %}
  {% assign all_items = posts_array | concat: websites_array %}

  {% for item in all_items %}
    {
      "title": {{ item.title | jsonify }},
      "url": {% if item.collection == 'websites' %}{{ item.site_url | jsonify }}{% else %}{{ item.url | relative_url | jsonify }}{% endif %},
      "date": {% if item.date %}{{ item.date | date_to_string | jsonify }}{% else %}null{% endif %},
      "tags": {{ item.tags | jsonify }},
      "content": {{ item.content | strip_html | strip_newlines | normalize_whitespace | jsonify }},
      "description": {{ item.description | jsonify }}
    }{% unless forloop.last %},{% endunless %}
  {% endfor %}
]
